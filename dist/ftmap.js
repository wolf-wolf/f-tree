!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("directory-tree"),require("path"),require("fs"),require("chalk"),require("yargs")):"function"==typeof define&&define.amd?define(["exports","directory-tree","path","fs","chalk","yargs"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ftmap={},e.dirTree,e.path,e.fs,e.chalk,e.yargs)}(this,(function(e,t,r,o,l,n){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var u=a(t),c=i(r),s=i(o),f=a(l),d=a(n);const p={directory:"D",file:"F"};function g(e,t){let r="";for(let o=0;o<e;o++)"0"===t[o]?r+="    ":r+="│   ";return r}const b={targetDirectory:process.cwd(),pattern:"",level:1/0,tag:!1,output:null,nature:!1,root:!1};function y(e,t,r,o){const{level:l,tag:n}=o;let a=l||1/0,i="";function u(e,t){return e.name.toLowerCase(),t.name.toLowerCase(),e>t?-1:t>e?1:0}let c=e;if(!o.nature){let t=e.filter((e=>"directory"===e.type)).sort(u),r=e.filter((e=>"file"===e.type)).sort(u);c=t.concat(r)}for(let e=0;e<c.length;e++){let l=r,u=c[e];i+=g(t,l),e===c.length-1?(i+="└──",l+="0"):(i+="├──",l+="1");const s=`[${p[u.type]}] `;i+=`${n?s:""}${u.name}\n`,u.children&&t+1<a&&(i+=y(u.children,t+1,l,o))}return i}function h(e=b){let{pattern:t,targetDirectory:r}=e;r=r||process.cwd();let o="";"[object String]"===Object.prototype.toString.call(t)?o=new RegExp(t.substring(1,t.length-2)):"[object RegExp]"===Object.prototype.toString.call(t)&&(o=t);let l=y(u.default(r,{exclude:o,attributes:["type"]}).children,0,"",e);if(e.root){let t=r.split("/");const o=l.split("\n");let n=0;for(let e=0;e<o.length;e++)n=Math.max(n,o[e]?.length);let a="".padStart(n+20,"-");l=(e.tag?"[Root] ":"")+t[t.length-1]+"\n"+a+"\n"+l}return l}const O={getFileTree:h};e.cli=async function(e){let t=function(e){const t=d.default.usage("Usage: $0 [options]").alias("I","pattern").describe("I",'需要排除的文件目录正则表达式（注意引号）\neg. "/node_modules|.git/"').alias("L","level").describe("L","文件目录结构的展示层级").alias("T","tag").describe("T","是否展示文件类型").alias("O","output").describe("O","内容输出地址，默认为控制台打印").alias("N","nature").describe("N","使用系统自然顺序，若不设置则默认显示为目录-文件的排序方式").alias("R","root").describe("R","是否显示根目录").help("h").alias("h","help").showHelpOnFail(!0,"Specify --help for available options").argv;return{pattern:t.pattern||!1,level:t.level||!1,tag:t.tag||!1,output:t.output||!1,nature:t.nature||!1,root:t.root||!1}}();console.log("%s",f.default.blue.bold(">> START 文件目录扫描...."));const r=h(t);console.log("%s",f.default.green.bold(">> DONE 文件目录扫描...")),t.output?(console.log("%s",f.default.blue.bold(`>> START 文件写入....[${t.output}]`)),s.writeFileSync(c.resolve(t.output),r),console.log("%s",f.default.green.bold(">> DONE 文件写入...."))):console.log(r),console.log("%s",f.default.green.bold(">> DONE 执行完成...."))},e.default=O,Object.defineProperty(e,"__esModule",{value:!0})}));
